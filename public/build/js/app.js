(()=>{"use strict";var e={326:(e,t,a)=>{a.r(t)},525:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePage=void 0;const r=a(22),l=a(829);t.ChangePage=class{static detailedProject(e){let t=document.querySelector(".groupContainer");null!==t&&t.remove();let a=r.Utils.createCreate("div","projectContainer",document.body),n=r.Utils.createCreate("div","hour",a);n.innerHTML="Heures total: ";let i=r.Utils.createCreate("span","totalHour",n),o=r.Utils.createCreate("div","back",a);o.innerHTML="Acceuil",o.addEventListener("click",(()=>{r.Utils.homePage()}));let c=0;for(let t=0;t<JSON.parse(localStorage[e]).length;t++)c+=JSON.parse(localStorage[e])[t].time;i.innerHTML=r.Utils.formatDuration(c),r.Utils.createCreate("p","projectTitle",a).innerHTML=e;let s=r.Utils.createCreate("div","taskContainer",a);for(let t=0;t<JSON.parse(localStorage[e]).length;t++){let a=r.Utils.createCreate("div","taskLine",s);r.Utils.createCreate("p","taskName",a).innerHTML=JSON.parse(localStorage[e])[t].name;let n=r.Utils.createCreate("div","none",a);r.Utils.createCreate("i","far fa-calendar-alt",n),r.Utils.createCreate("span","littleParagraph timeSince",n).innerHTML=JSON.parse(localStorage[e])[t].lastInteraction;let i=r.Utils.createCreate("div","none",a),o=r.Utils.createCreate("i","fas fa-stopwatch",i);o.dataset.project=e,r.Utils.createCreate("span","littleParagraph timeSave",i).innerHTML=r.Utils.formatDuration(JSON.parse(localStorage[e])[t].time),o.addEventListener("click",(()=>{r.Utils.editTime(o,JSON.parse(localStorage[e])[t].time)}));let c=r.Utils.createCreate("div","none",a),d=r.Utils.createCreate("i","far fa-edit",c);l.IconClick.editTaskIcon(d);let p=r.Utils.createCreate("i","far fa-trash-alt",c);l.IconClick.deleteTaskIcon(p)}}}},13:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateGroup=void 0;const r=a(14),l=a(22),n=a(829);let i;t.CreateGroup=class{static createGroupContainer(){i=l.Utils.createCreate("div","groupContainer",document.body)}static createAddProject(){let e=l.Utils.createCreate("div","group",i);l.Utils.createCreate("i","far fa-plus-square",e),l.Utils.createCreate("p","addProjectParagraph",e).innerHTML="Ajouter un projet",e.addEventListener("click",r.CreateInput.createProjectInput)}static addProject(e,t){let a=l.Utils.createCreate("div","group",i),o=l.Utils.createCreate("div","headline",a),c=l.Utils.createCreate("i","far fa-eye",o);c.title="Voir le projet en détail",c.dataset.project=e,n.IconClick.eyeIcon(c),l.Utils.createCreate("p","projectTitle",o).innerHTML=e;let s=l.Utils.createCreate("i","far fa-trash-alt",o);s.title="Supprimer le projet",s.dataset.project=e;let d=l.Utils.createCreate("div","content",a),p=l.Utils.createCreate("div","info",d);n.IconClick.deleteIcon(s);let u=l.Utils.createCreate("div","clockDiv",p);l.Utils.createCreate("i","far fa-clock",u).title="Temps total d'heures sur le projet";let m=l.Utils.createCreate("p","time",u),v=0;for(let t=0;t<JSON.parse(localStorage[e]).length;t++)v+=JSON.parse(localStorage[e])[t].time;m.innerHTML=l.Utils.formatDuration(v),m.dataset.type="clock";let C=l.Utils.createCreate("div","calendarDiv",p);l.Utils.createCreate("i","far fa-calendar-alt",C).title="Dernière modification";let g=l.Utils.createCreate("p","time",C);g.innerHTML="il y a 0 heures",g.dataset.type="calendar";let f=l.Utils.createCreate("div","taskContainer",d);l.Utils.createCreate("div","fixHeight",f).dataset.project=e;let h=l.Utils.createCreate("div","addTask",f);h.innerHTML="Ajouter une tâche",h.dataset.project=e,h.addEventListener("click",(()=>{r.CreateInput.createTaskInput(h)})),null!==t&&this.addTask(t,h)}static addTask(e,t){let a=document.querySelectorAll(".fixHeight"),r=document.querySelectorAll(".task"),n=[],i=[];for(let o=0;o<a.length;o++)if(a[o].dataset.project===t.dataset.project)for(let c=0;c<e.length;c++){let s=l.Utils.createCreate("div","taskLine",a[o]);if(l.Utils.createCreate("p","task",s).innerHTML=e[c],null!==localStorage&&localStorage.length>a.length-1)for(let a=0;a<JSON.parse(localStorage[t.dataset.project]).length;a++){let l=JSON.parse(localStorage[t.dataset.project])[a];if(l.name===e[c])i.push(l.time);else for(let e=0;e<r.length;e++)l.name===r[e].innerHTML&&i.push(l.time)}let d=l.Utils.createCreate("i","fas fa-stopwatch",s);if(d.dataset.task=e[c],l.Utils.stopwatchClick(d),a[o].children&&a[o].children.length>=e.length)for(let e=0;e<a[o].children.length;e++)if(i.length>e||i.push(0),"P"===a[o].children[e].children[0].tagName){let t=new Date;n.push(JSON.parse(`{\n                                    "name": "${a[o].children[e].children[0].innerHTML}",\n                                    "time": ${i[e]},\n                                    "lastInteraction" : "${t.getDate()} / ${t.getMonth()+1} / ${t.getFullYear()}"  \n                                }`))}}l.Utils.saveProject(t.dataset.project,n)}}},14:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateInput=void 0;const r=a(22),l=a(13);let n;t.CreateInput=class{static createProjectInput(){let e=document.querySelector(".groupContainer");e&&(e.style.filter="blur(4px)");let t=r.Utils.createCreate("div","addProjectContainer",document.body),a=r.Utils.createCreate("div","littleSquare",t);r.Utils.createCreate("p","formTitle",a).innerHTML="Ajouter un projet";let i=document.createElement("label");i.innerHTML="Nom du projet",i.htmlFor="projectName",a.append(i);let o=document.createElement("input");o.type="text",o.id="projectName",a.append(o),r.Utils.createCreate("p","formTitle",a).innerHTML="Ajouter des tâches";let c=document.createElement("label");c.innerHTML="Nom de la tâche",c.htmlFor="taskName",a.append(c);let s=document.createElement("input");s.type="text",s.id="taskName",a.append(s);let d=r.Utils.createCreate("i","far fa-check-circle",a);d.title="Confirmer",d.addEventListener("click",(()=>{r.Utils.createCreate("p","task",n).innerHTML=s.value,s.value=""})),n=r.Utils.createCreate("div","formAddTask",a);let p=r.Utils.createCreate("div","buttonContainer",a),u=r.Utils.createCreate("div","confirmAdd",p);u.innerHTML="Ajouter";let m=r.Utils.createCreate("div","cancel",p);m.innerHTML="Annuler",m.addEventListener("click",(()=>{e.style.filter="blur(0)",t.remove()})),u.addEventListener("click",(()=>{if(o.value.length>0){let a=n.children;if(a.length>0){let e=[];for(let t=0;t<a.length;t++)e.push(a[t].innerHTML);l.CreateGroup.addProject(o.value,e)}else l.CreateGroup.addProject(o.value,null);e.style.filter="blur(0)",t.remove()}else{r.Utils.createCreate("p","errorMessage",a).innerHTML="N'oublie pas de nommer votre projet"}}))}static createTaskInput(e){let t=document.querySelector(".groupContainer");t&&(t.style.filter="blur(4px)");let a=r.Utils.createCreate("div","addProjectContainer",document.body),i=r.Utils.createCreate("div","littleSquare",a);r.Utils.createCreate("p","formTitle",i).innerHTML="Ajouter des tâches";let o=document.createElement("label");o.innerHTML="Nom de la tâche",o.htmlFor="taskName",i.append(o);let c=document.createElement("input");c.type="text",c.id="taskName",i.append(c);let s=r.Utils.createCreate("i","far fa-check-circle",i);s.title="Confirmer",s.addEventListener("click",(()=>{r.Utils.createCreate("p","newTask",n).innerHTML=c.value,c.value=""})),n=r.Utils.createCreate("div","formAddTask",i);let d=r.Utils.createCreate("div","buttonContainer",i),p=r.Utils.createCreate("div","confirmAdd",d);p.innerHTML="Ajouter";let u=r.Utils.createCreate("div","cancel",d);u.innerHTML="Annuler",u.addEventListener("click",(()=>{t&&(t.style.filter="blur(0)"),a.remove()})),p.addEventListener("click",(()=>{if(n.children.length>0){let r=[],i=n.children;for(let e=0;e<i.length;e++)r.push(i[e].innerHTML);l.CreateGroup.addTask(r,e),t&&(t.style.filter="blur(0)"),a.remove()}else{r.Utils.createCreate("p","errorMessage",i).innerHTML="Il n'y a aucune tâche à ajouter"}}))}}},829:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconClick=void 0;const r=a(525),l=a(22);t.IconClick=class{static deleteIcon(e){e.addEventListener("click",(()=>{let t=e.parentElement;t&&(t=t.parentElement),t&&(localStorage.removeItem(e.dataset.project),t.remove())}))}static eyeIcon(e){e.addEventListener("click",(()=>{var t,a;r.ChangePage.detailedProject(null===(a=null===(t=e.nextElementSibling)||void 0===t?void 0:t.nextElementSibling)||void 0===a?void 0:a.innerHTML)}))}static deleteTaskIcon(e){e.addEventListener("click",(()=>{var t,a;null===(a=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===a||a.remove(),this.reloadSave()}))}static editTaskIcon(e){e.addEventListener("click",(()=>{var t,a,r,l;let n=null===(r=null===(a=null===(t=e.parentElement)||void 0===t?void 0:t.previousElementSibling)||void 0===a?void 0:a.previousElementSibling)||void 0===r?void 0:r.previousElementSibling,i=document.createElement("input");i.className="editInput",i.value=n.innerHTML,null===(l=n.parentElement)||void 0===l||l.prepend(i),n.style.display="none",i.addEventListener("keyup",(e=>{"Enter"===e.key&&(n.innerHTML=i.value,n.style.display="initial",i.remove(),this.reloadSave())}))}))}static reloadSave(){var e;let t=document.querySelectorAll(".taskName"),a=[];for(let e=0;e<t.length;e++)a.push(t[e].innerHTML);let r=document.querySelectorAll(".timeSave"),n=[];for(let e=0;e<r.length;e++)n.push(r[e].innerHTML.substring(0,r[e].innerHTML.length-1));console.log(a.length),console.log(n.length);let i=[];for(let e=0;e<a.length;e++)i.push(JSON.parse(`{\n                                    "name": "${a[e]}",\n                                     "time": ${n[e]} \n                                    }`));l.Utils.saveProject(null===(e=document.querySelector(".projectTitle"))||void 0===e?void 0:e.innerHTML,i)}}},22:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const r=a(13);let l;class n{static createCreate(e,t,a){let r=document.createElement(e);return r.className=t,a.append(r),r}static saveProject(e,t){localStorage.setItem(e,JSON.stringify(t))}static searchProject(){if(null!==localStorage&&localStorage.length>0)for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e),a=[];for(let e=0;e<JSON.parse(localStorage[t]).length;e++){let r=JSON.parse(localStorage[t])[e].name;a.push(r)}r.CreateGroup.addProject(t,a)}}static stopwatchClick(e){let t=!1;e.addEventListener("click",(()=>{clearInterval(l);let a=e.dataset.task,r=document.querySelectorAll(".fa-stopwatch");for(let e=0;e<r.length;e++)r[e].style.color="#49cd6d";t?(this.stopTime(e,a),t=!1):(this.addTime(e,a),t=!0)}))}static addTime(e,t){var a,r;if(e.style.color="#e24e58",null!==localStorage){let n=null===(r=null===(a=e.parentElement)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.dataset.project,i=JSON.parse(localStorage[n]);for(let e=0;e<i.length;e++)i[e].name===t&&(l=setInterval((()=>{i[e].time+=1,localStorage[n]=JSON.stringify(i)}),1e3))}}static stopTime(e,t){e.style.color="#49cd6d",clearInterval(l)}static formatDuration(e){const t={h:Math.floor(e/3600)%24,m:Math.floor(e/60)%60,s:e%60};return Object.entries(t).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${e}`)).join(" ")}static getHoursDiffBetweenDates(e,t){return Math.floor((t-e)/36e5)}static homePage(){let e=document.querySelector(".projectContainer");null!==e&&e.remove(),r.CreateGroup.createGroupContainer(),r.CreateGroup.createAddProject(),n.searchProject()}static editTime(e,t){let a=e.dataset.project;if(null!==e.nextElementSibling&&e.nextElementSibling.remove(),null!==e.parentElement){let r=document.createElement("input");r.value=t,r.className="newTime",e.parentElement.append(r);let l=document.createElement("button");l.innerHTML="✔",l.className="validNewTime",e.parentElement.append(l),l.addEventListener("click",(()=>{if(null!==e.parentElement){let i=JSON.parse(localStorage[a]);for(let e=0;e<i.length;e++)i[e].time===t&&(i[e].time=parseInt(r.value));localStorage[a]=JSON.stringify(i),n.createCreate("span","littleParagraph timeSave",e.parentElement).innerHTML=n.formatDuration(parseInt(r.value)),r.remove(),l.remove()}}))}}}t.Utils=n}},t={};function a(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{a(326);a(22).Utils.homePage()})()})();